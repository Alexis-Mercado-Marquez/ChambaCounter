import{r as c,j as e,R as K}from"./react-PRVk9eUf.js";import{c as Q}from"./react-dom-CVYAfHRs.js";import{M as U,a as X,b as Y,F as _,c as P,L as z,I as L,d as q,B as k,C as I,e as H,f as Z,R as O,g as b,h as V,D as W,i as ee,j as R,k as re,N as se,l as E,m as J,T as te,n as T}from"./reactstrap-DOpIMaKD.js";/* empty css                  */import{Z as oe}from"./react-colorful-BLsZ--xn.js";import{R as D,B as ne,X as ae,Y as ie,a as ce,C as F,P as le,b as de}from"./recharts-Cyc4PqSK.js";import"./classnames-4m0nnevf.js";import"./scheduler-CzFDRTuY.js";import"./prop-types-BKgtCGqk.js";import"./react-popper-scISoHhJ.js";import"./react-fast-compare-Des79_iB.js";import"./@popperjs-BQBsAJpH.js";import"./warning-BQMFTuiE.js";import"./react-transition-group-Ct129y6Y.js";import"./@babel-RuvQnnb-.js";import"./clsx-B-dksMZM.js";import"./lodash-BeLTOBko.js";import"./react-is-8JwjhRSi.js";import"./react-smooth-CfVIon-J.js";import"./fast-equals-C7I1S-bJ.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-DjFPhhqo.js";import"./d3-path-CimkQT29.js";import"./victory-vendor-6_AdwBXU.js";import"./d3-scale-BYIooUZQ.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-BKO53YJi.js";import"./d3-time-QpEiTrED.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./recharts-scale-DiOBu8nk.js";import"./decimal.js-light-B5-9uEc-.js";import"./eventemitter3-Bj8YYhvP.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const d of t.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function m(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(o){if(o.ep)return;o.ep=!0;const t=m(o);fetch(o.href,t)}})();const ue=({mostrar:s,setMostrar:a,jugadores:m,setJugadores:l,cuenta:o,setCuenta:t})=>{const[d,x]=c.useState(""),[j,p]=c.useState("#aabbcc");c.useEffect(()=>{x(""),p("#aabbcc");const n=console.error;return console.error=(...u)=>{typeof u[0]=="string"&&/defaultProps/.test(u[0])||n(...u)},()=>{console.error=n}},[s]);const i=()=>{const n={id:o,nombre:d,color:j,puntos:0,ptsPositivos:0};l([...m,n]),t(u=>u+1),a(!1)},g=()=>{a(!1)};return e.jsxs(U,{isOpen:s,children:[e.jsx(X,{children:"Agregar jugador"}),e.jsx(Y,{children:e.jsxs(_,{children:[e.jsxs(P,{children:[e.jsx(z,{children:"Nombre"}),e.jsx(L,{name:"nombre",value:d,onChange:n=>x(n.target.value)})]}),e.jsxs(P,{children:[e.jsx(z,{children:"Color"}),e.jsx(oe,{color:j,onChange:p})]})]})}),e.jsxs(q,{children:[e.jsx(k,{color:"danger",size:"sm",onClick:()=>g(),children:"Cerrar"}),e.jsx(k,{color:"primary",size:"sm",onClick:()=>i(),children:"Agregar"})]})]})},me=({jugadorPrev:s,jugadores:a,setJugadores:m,unidades:l,borrarJugador:o})=>{const[t,d]=c.useState(s.puntos),[x,j]=c.useState(s.nombre);c.useEffect(()=>{p()},[t,x]);const p=()=>{const n=t>0?t:0,u={id:s.id,color:s.color,nombre:x,puntos:t,ptsPositivos:n},y=a.map(r=>r.id===u.id?u:r);m(y)},i=()=>{d(n=>n+Number(l))},g=()=>{d(n=>n-Number(l))};return e.jsx(I,{className:"div-tarjeta",children:e.jsx(H,{children:e.jsx(Z,{style:{backgroundColor:`${s.color}`,borderColor:`${s.color}`},children:e.jsxs(O,{children:[e.jsx(b,{sm:"9",xs:"12",children:e.jsx(L,{placeholder:"Jugador",value:x,onChange:n=>j(n.target.value)})}),e.jsx(b,{sm:"3",xs:"4",children:e.jsx("button",{className:"boton-borrar",onClick:()=>o(s.id),children:"X"})}),e.jsx(b,{sm:"2",xs:"4",children:e.jsx("button",{className:"boton-tarjeta margen-superior",onClick:g,children:"-"})}),e.jsx(b,{sm:"2",xs:"4",children:e.jsx("button",{className:"boton-tarjeta margen-superior",onClick:i,children:"+"})}),e.jsx(b,{sm:"8",xs:"12",children:e.jsx("h1",{className:"texto-grande",children:t})})]})})})})},pe=({jugadores:s,setJugadores:a})=>{const[m,l]=c.useState(!1),[o,t]=c.useState(0),[d,x]=c.useState(1),[j,p]=c.useState(!1),i=c.useRef(),g=r=>{var h=window.confirm("�Quieres borrar a este jugador?");h&&a(s.filter(C=>C.id!==r))},n=()=>{var r=window.confirm("�Quieres borrar a todos los jugadores?");r&&a([])},u=()=>{let r="";for(const f of s)r+="id:="+f.id+`
`,r+="nombre:="+f.nombre+`
`,r+="color:="+f.color+`
`,r+="puntos:="+f.puntos+`

`;r=r.substring(0,r.length-2);const h=document.createElement("a"),C=new Blob([r],{type:"text/plain"});h.href=URL.createObjectURL(C),h.download="jugadores.txt",document.body.appendChild(h),h.click()},y=async r=>{if(r.preventDefault(),r.target.files.length==0)return;if(s.length>0&&!window.confirm("Ya hay datos de jugadores. �Quiere sobreescribirlos?")){r.target.value="";return}a([]);let h=[];const C=new FileReader;C.onload=async f=>{const M=f.target.result.split(`

`);for(const w of M){const S=w.split(`
`);let v={id:0,nombre:"",color:"#000000",puntos:0,ptsPositivos:0};for(const $ of S){const N=$.split(":=");if(N.length===2)switch(N[0]){case"id":v.id=Number(N[1]);break;case"nombre":v.nombre=N[1];break;case"color":v.color=N[1];break;case"puntos":const A=Number(N[1]);v.puntos=A,v.ptsPositivos=A>0?A:0;break}}h.push(v)}a(h);const G=h.reduce((w,S)=>w&&w.id>S.id?w:S);t(G.id+1)},C.readAsText(r.target.files[0]),r.target.value=""};return e.jsxs(I,{className:"margen-superior",children:[e.jsxs(O,{children:[e.jsx(b,{xs:"6",children:e.jsx(L,{type:"number",name:"aumento",value:d,onChange:r=>x(r.target.value)})}),e.jsx(b,{xs:"3",children:e.jsx(k,{color:"primary",size:"sm",onClick:()=>l(!0),children:"Nuevo"})}),e.jsx(b,{xs:"3",children:e.jsxs(V,{isOpen:j,toggle:()=>p(!j),children:[e.jsx(W,{caret:!0,children:"Opciones"}),e.jsxs(ee,{children:[e.jsx(R,{header:!0,children:"Jugadores"}),e.jsx(R,{onClick:()=>i.current.click(),children:"Subir"}),e.jsx(R,{disabled:s.length==0,onClick:()=>u(),children:"Descargar"}),e.jsx(R,{divider:!0}),e.jsx(R,{disabled:s.length==0,onClick:()=>n(),children:"Borrar"})]})]})}),e.jsx(b,{xs:"12",children:e.jsx("input",{type:"file",ref:i,multiple:!1,onChange:r=>y(r),hidden:!0})})]}),e.jsx(ue,{mostrar:m,setMostrar:l,jugadores:s,setJugadores:a,cuenta:o,setCuenta:t}),e.jsx(O,{children:s.map(r=>e.jsx(b,{xs:"6",children:e.jsx(me,{jugadorPrev:r,jugadores:s,setJugadores:a,unidades:d,borrarJugador:g})},r.id))})]})},he=({jugadores:s})=>{const[a,m]=c.useState("barras"),[l,o]=c.useState(1),t=500;c.useEffect(()=>{new ResizeObserver(i=>{o(i[0].contentBoxSize[0].inlineSize*.35)}).observe(document.getElementById("div-grafico"))});const d=Math.PI/180,x=p=>{const{cx:i,cy:g,midAngle:n,innerRadius:u,outerRadius:y,percent:r,index:h,data:C}=p,f=u+(y-u)*.5,B=i+f*Math.cos(-n*d),M=g+f*Math.sin(-n*d);return e.jsx("text",{x:B,y:M,fill:"black",textAnchor:B>i?"start":"end",dominantBaseline:"central",children:`${(r*100).toFixed(0)}%`})},j=({payload:p,x:i,y:g,width:n,height:u,value:y})=>{const r=y>=0?i+n+6:i+6,h=g+u/2+6;return e.jsx("text",{x:r,y:h,fill:"#666",textAnchor:"right",className:"texto-barra",children:y})};return e.jsxs("div",{className:"margen-superior",children:[e.jsxs(re,{children:[e.jsx(k,{color:"secondary",onClick:()=>m("barras"),children:"Barras"}),e.jsx(k,{color:"secondary",onClick:()=>m("pastel"),children:"Pastel"})]}),e.jsx("div",{id:"div-grafico",className:"margen-superior",children:a=="barras"?e.jsx(D,{width:"100%",height:t,children:e.jsxs(ne,{data:s,layout:"vertical",margin:{top:20,left:20,right:20},children:[e.jsx(ae,{hide:!0,axisLine:!1,type:"number"}),e.jsx(ie,{yAxisId:0,dataKey:"nombre",type:"category"}),e.jsx(ce,{dataKey:"puntos",fill:"#8884d8",barSize:32,label:j,children:s.map((p,i)=>e.jsx(F,{fill:p.color},`cell-${i}`))})]})}):e.jsx(D,{width:"100%",height:t,children:e.jsx(le,{width:"100%",height:"100%",children:e.jsx(de,{data:s,cx:"50%",cy:"50%",labelLine:!1,label:x,outerRadius:l,dataKey:"ptsPositivos",children:s.map((p,i)=>e.jsx(F,{fill:p.color},`cell-${i}`))})})})})]})};function xe(){const[s,a]=c.useState([]),[m,l]=c.useState("1");return e.jsxs(I,{children:[e.jsx("h2",{children:"Chamba Counter"}),e.jsxs(se,{tabs:!0,children:[e.jsx(E,{className:"nav-tab",children:e.jsx(J,{active:m=="1",onClick:()=>l("1"),children:"Jugadores"})}),e.jsx(E,{className:"nav-tab",children:e.jsx(J,{active:m=="2",onClick:()=>l("2"),children:"Grafica"})})]}),e.jsxs(te,{activeTab:m,children:[e.jsx(T,{tabId:"1",children:e.jsx(pe,{jugadores:s,setJugadores:a})}),e.jsx(T,{tabId:"2",children:e.jsx(he,{jugadores:s})})]})]})}Q.createRoot(document.getElementById("root")).render(e.jsx(K.StrictMode,{children:e.jsx(xe,{})}));
